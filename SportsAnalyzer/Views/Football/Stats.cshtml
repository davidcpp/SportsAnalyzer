@model SportsAnalyzer.Models.Statistics

@{
  ViewBag.Title = "Stats";
  Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1 class="text-center my-4 my-sm-5">Statistics</h1>
<div class="row mb-4 mb-sm-5">
  <canvas id="myChart"></canvas>
</div>
<div class="row mb-4 mb-sm-5 justify-content-center">
  <div class="table-responsive-lg w-100">
    <table class="table">
      <thead class="thead-light">
        <tr>
          <th>
            @Html.DisplayNameFor(model => model.LeagueName)
          </th>
          <th>
            @Html.DisplayNameFor(model => model.TeamName)
          </th>
          <th>
            @Html.DisplayNameFor(model => model.MatchesNumber)
          </th>
          <th>
            @Html.DisplayNameFor(model => model.GoalsSum)
          </th>
          <th>
            @Html.DisplayNameFor(model => model.GoalsAvg)
          </th>
          <th>
            @Html.DisplayNameFor(model => model.GoalsAvgHome)
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            @Html.DisplayFor(model => model.LeagueName)
          </td>
          <td>
            @Html.DisplayFor(model => model.TeamName)
          </td>
          <td>
            @Html.DisplayFor(model => model.MatchesNumber)
          </td>
          <td>
            @Html.DisplayFor(model => model.GoalsSum)
          </td>
          <td>
            @Html.DisplayFor(model => model.GoalsAvg)
          </td>
          <td>
            @Html.DisplayFor(model => model.GoalsAvgHome)/@Html.DisplayFor(model => model.GoalsAvgAway)
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="row mb-4 mx-1 mb-sm-5 justify-content-center">
  <div class="col-12 col-sm-4 col-md-3 bg-col">
    <fieldset>
      <legend>
        Teams
      </legend>
      <div class="row mx-1 justify-content-center">
        <div class="form-check col text-center">
          <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="1">
          <label class="form-check-label" for="inlineCheckbox1">1</label>
        </div>
        <div class="form-check col text-center">
          <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="2">
          <label class="form-check-label" for="inlineCheckbox2">2</label>
        </div>
        <div class="form-check col text-center">
          <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="3">
          <label class="form-check-label" for="inlineCheckbox3">3</label>
        </div>
      </div>
    </fieldset>
  </div>

  <div class="col-12 col-sm-7 col-md-8 bg-col">
    @using (Html.BeginForm("Stats", "Football", FormMethod.Post, new { @class = "" }))
    {
      @Html.AntiForgeryToken()
      @Html.ValidationSummary(true, "", new { @class = "text-danger" })
      @Html.HiddenFor(model => model.LeagueName)
      @Html.HiddenFor(model => model.SeasonYear)

      <div class="form-group justify-content-center">
        @Html.LabelFor(model => model.RoundsSelectList,
                                          htmlAttributes: new { @class = "col-sm-auto col-form-label text-center" })
        @Html.ListBoxFor(model => model.RoundsNumbersInts, Model.RoundsSelectList, new { @class = "form-control" })
        @Html.ValidationMessageFor(i => i.RoundsSelectList, "", new { @class = "text-warning" })
      </div>
      <input type="submit" value="Chose rounds" class="btn btn-primary btn-block" />
    }
  </div>
</div>
@{
  double[] GoalsInIntervalsPercent = Model.GoalsInIntervalsPercent;
  double[] TimeIntervalsLimits = Model.TimeIntervalsLimits;
  string[] TimeIntervalsTexts = new string[TimeIntervalsLimits.Count() - 1];

  for (int i = 0; i < TimeIntervalsTexts.Count(); i++)
  {
    TimeIntervalsTexts[i] = TimeIntervalsLimits[i].ToString() + "-" + TimeIntervalsLimits[i + 1].ToString();
  }
  var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
}

@section Scripts
{
  <script id="mainScript" src="~/Scripts/main.js"
          data-time-intervals-all-text='@serializer.Serialize(TimeIntervalsTexts)'
          data-goals-in-intervals-percent='@serializer.Serialize(GoalsInIntervalsPercent)'></script>
}

